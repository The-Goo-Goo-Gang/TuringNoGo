# 阶段3：实现不围棋AI及可能的附加任务

> DDL：2023-05-30

## 任务

### 不围棋AI部分

1. 实现不围棋AI，AI不需要很强
2. 实现本地和联机时 AI 托管（如果在本地双方都开就是EVE，电脑对电脑）

> 你可以参考 [`guidance/nogo/nogo.md`](../guidance/nogo/nogo.md) 中的AI资料

### 附加任务

根据自己的兴趣和能力选择0-4个完成即可，本任务边际收益递减效应会非常强，请仔细考虑。不同任务的分数会因难度不一而略有不同。

1. 在重现对局中实现 `播放`,`暂停`,`上一步`,`下一步`,`到第_步` 等功能。
2. 重播对局时可以随时介入进行不一样的尝试，尝试后也可以还原并继续播放。
3. 完善网络部分1：实现结束后双方互换 `READY_OP` 再来一局。
4. 完善网络部分2：用队列（先进先出）来处理多客户端的对局申请：可以在不重开软件的情况下连续进行不同的对弈。即每当有人发送一次对局申请，就会跳出来一个接受拒绝界面，但你需要保证先申请的显示在上，或先申请的拒绝后才能跳出之后的，同意之对局之后的申请要自动发送拒绝信号。最开始和退出一场对局后，可以继续接收邀请，也可以发起对局。任何时候不能同时进入两场对局，也就是不能同时给两台主机发送 `READY_OP`，但可以同时接收到多个 `READY_OP`。
5. AI 线程和图形界面线程独立，AI 托管可以随时关闭：如果不独立的话，当 AI 计算时间很长时，图形界面会呈现卡死的样子，但其实是因为他在运行AI，没法响应你的点击操作，所以要停止托管不能只靠简单地点击按钮。要解决这个问题，你需要给 AI 单独开一个线程，Qt 中有相关的库。
6. AI 进度条：在游戏界面显示正在计算的AI进度条。这是附加任务3的一个延伸，多线程是这个任务的前提，你需要尽量保证这个进度条是线性增长的，比如你不能简单地用搜索到第几层来当进度条，这是非线性的。
7. 进一步优化濒死提示：即进一步利用搜索或其他算法，连续预测后几步，然后同样要求禁止玩家或提示玩家必输的步。值得注意的是，这个提示不能影响游戏的正常进行，也就是说，如果你要沿用已有的AI算法，那么你要么保证这个AI的运算速度很快，不会让用户察觉到线程阻塞，要么就是多线程。如果玩家操作先于计算结果产生，那么忽略濒死提示即可。
8. 开发计算即时胜率的算法，并显示在对局和重现中，需要有理论支撑，例如论文。
9. 热情地帮助其他同学解决大作业中遇到的问题。

> 完成至少 2 个附加任务是本大作业获得 90 分的必要条件。
> 
> 原则上，你也可以自己设计其他的功能，但请不要应付，也不需要提前咨询助教，助教最后会根据你们的报告评判。

### 任务外的功能

以下是其他一些简单的小功能，可以帮助你们体现和运用曾经的课堂所学，但因为内容较简单，不纳入任务内，但如果你觉得自己不会写或没试过，可以以此机会练习一下：

1. 利用函数指针，或 `std::function` 实现 AI 算法切换，这可以让你们实现两种 AI 对打，自测 AI 强度。
2. 利用文件读写，永久性存储设置，例如 IP 和端口，重启后会保持上次关闭时的状态。


## 提交

无论你是否在截止时间前完成这一阶段的全部开发任务，请在 `submission/` 下你的小组文件夹中上传你第三阶段的阶段性报告，在报告中请简要描述你的小组分工、代码框架设计、遇到的问题及解决方法和其他你认为有必要的内容。

**重要提醒：请在上机课上找其他小组的同学进行联机的充分测试，以免影响最后的比赛。**
